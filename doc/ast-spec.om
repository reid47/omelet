###########################################################################
##                                                                       ##
##          O M E L E T     A S T     S P E C I F I C A T I O N          ##
##                                                                       ##
###########################################################################

+ast-node node =
    @div.ast-node[id={node.kind}]
        @ul
            >for key in node|keys
                @li {key} - {node[key]}

##-------------------------------------------------------------------------
## Array
##-------------------------------------------------------------------------

>ast-node with
    + node =
        + kind = "Array"
        + elements =
            - {ArrayElement}
        + location = ...

##-------------------------------------------------------------------------
## ArrayElement
##-------------------------------------------------------------------------

>ast-node with
    + node =
        + kind = "ArrayElement"
        + body = {Block} | {Dictionary} | {Array} | {Number} | {String} | {Boolean}
        + location = ...

##-------------------------------------------------------------------------
## Attribute
##-------------------------------------------------------------------------

>ast-node with
    + node =
        + kind = "Attribute"
        + name = {String}
        + value = {String} | {Interpolation}
        + location = ...

##-------------------------------------------------------------------------
## Block
##-------------------------------------------------------------------------

>ast-node with
    + node =
        + kind = "Block"
        + contents =
            - {Comment}
            - {Include}
            - {For}
            - {If}
            - {Tag}
            - {Interpolation}
            - {String}
        + location = ...

##-------------------------------------------------------------------------
## Boolean
##-------------------------------------------------------------------------

>ast-node with
    + node =
        + kind = "Boolean"
        + value = a boolean literal
        + location = ...

##-------------------------------------------------------------------------
## Comment
##-------------------------------------------------------------------------

>ast-node with
    + node =
        + kind = "Comment"
        + value = a string literal
        + location = ...

##-------------------------------------------------------------------------
## Definition
##-------------------------------------------------------------------------

>ast-node with
    + node =
        + kind = "Definition"
        + name = {Identifier}
        + parameters =
            - {Identifier}
        + body = {Block} | {Dictionary} | {Array} | {Number} | {String} | {Boolean} | null
        + location = ...

##-------------------------------------------------------------------------
## Dictionary
##-------------------------------------------------------------------------

>ast-node with
    + node =
        + kind = "Dictionary"
        + entries =
            - {Definition}
        + location = ...

##-------------------------------------------------------------------------
## Doctype
##-------------------------------------------------------------------------

>ast-node with
    + node =
        + kind = "Doctype"
        + name = {String}
        + location = ...

##-------------------------------------------------------------------------
## Document
##-------------------------------------------------------------------------

>ast-node with
    + node =
        + kind = "Document"
        + extend = {Extend} | null
        + imports =
            - {Import}
        + contents =
            - {Doctype}
            - {Comment}
            - {Definition}
            - {Include}
            - {For}
            - {If}
            - {Block}
            - {Tag}
            - {Interpolation}
            - {String}
            - {Boolean}
            - {Number}
        + location = ...

##-------------------------------------------------------------------------
## Extend
##-------------------------------------------------------------------------

>ast-node with
    + node =
        + kind = "Extend"
        + file = {Path}
        + location = ...

##-------------------------------------------------------------------------
## Filter
##-------------------------------------------------------------------------

>ast-node with
    + node =
        + kind = "Filter"
        + name = {Identifier}
        + arguments =
            - {Number}
            - {Boolean}
            - {String}
            - {Identifier}
            - {FilterSequence}
        + location = ...

##-------------------------------------------------------------------------
## FilterSequence
##-------------------------------------------------------------------------

>ast-node with
    + node =
        + kind = "FilterSequence"
        + sequence =
            - {Filter}
        + location = ...

##-------------------------------------------------------------------------
## For
##-------------------------------------------------------------------------

>ast-node with
    + node =
        + kind = "For"
        + iterator = {Identifier}
        + data = {Identifier} | {Path}
        + filters = {FilterSequence} | null
        + body = {Block}
        + location = ...

##-------------------------------------------------------------------------
## Identifier
##-------------------------------------------------------------------------

>ast-node with
    + node =
        + kind = "Identifier"
        + value = a string literal
        + modifiers =
            - {Modifier}
        + location = ...

##-------------------------------------------------------------------------
## If
##-------------------------------------------------------------------------

>ast-node with
    + node =
        + kind = "If"
        + predicate = {Identifier}
        + negated = a boolean literal
        + filters = {FilterSequence} | null
        + thenCase = {Block} | null
        + elifCases =
            - {If}
        + elseCase = {Block} | null
        + location = ...

##-------------------------------------------------------------------------
## Import
##-------------------------------------------------------------------------

>ast-node with
    + node =
        + kind = "Import"
        + file = {String}
        + alias = {Identifier}
        + location = ...

##-------------------------------------------------------------------------
## Include
##-------------------------------------------------------------------------

>ast-node with
    + node =
        + kind = "Include"
        + included = {Identifier} | {Path}
        + context = {Dictionary} | null
        + location = ...

##-------------------------------------------------------------------------
## Interpolation
##-------------------------------------------------------------------------

>ast-node with
    + node =
        + kind = "Interpolation"
        + name = {Identifier}
        + arguments =
            - {Identifier} | {String} | {Number} | {Boolean}
        + filters = {FilterSequence} | null
        + location = ...

##-------------------------------------------------------------------------
## Modifier
##-------------------------------------------------------------------------

>ast-node with
    + node =
        + kind = "Modifier"
        + value = {String} | {Number}
        + location = ...

##-------------------------------------------------------------------------
## Number
##-------------------------------------------------------------------------

>ast-node with
    + node =
        + kind = "Number"
        + value = a number literal
        + location = ...

##-------------------------------------------------------------------------
## Path
##-------------------------------------------------------------------------

>ast-node with
    + node =
        + kind = "Path"
        + value = a string literal
        + location = ...

##-------------------------------------------------------------------------
## Raw
##-------------------------------------------------------------------------

>ast-node with
    + node =
        + kind = "Raw"
        + value = a string literal
        + location = ...

##-------------------------------------------------------------------------
## String
##-------------------------------------------------------------------------

>ast-node with
    + node =
        + kind = "String"
        + quoted = a boolean literal
        + value = a string literal
        + location = ...

##-------------------------------------------------------------------------
## Tag
##-------------------------------------------------------------------------

>ast-node with
    + node =
        + kind = "Tag"
        + name = {String}
        + attributes =
            - {Attribute}
        + inner = {Block} | {Raw}
        + location = ...

